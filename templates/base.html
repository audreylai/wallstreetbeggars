<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}{% endblock %} | WSB</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='tailwind/output.css') }}"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />
    {% block header %}{% endblock %}
		<script>
			let dark = ("{{dark_mode}}" == "True");
			if (dark) {
				document.documentElement.classList.add('dark');
				// $("#light-icon").hide();
			} else {
				document.documentElement.classList.remove('dark');
				dark = false;
				// $("#dark-icon").hide();
			}
			var change_dark_mode = () => {}
			$().ready(function() {
				$("#theme-toggle").bind('click', function() {
					console.log("HELLO")
					if (document.documentElement.classList.contains('dark')) {
						document.documentElement.classList.remove('dark');
						dark = false;
						$.get("/theme/light")
						$("#dark-icon").hide();
						$("#light-icon").show();
					} else {
						document.documentElement.classList.add('dark');
						dark = true;
						$.get("/theme/dark")
						$("#light-icon").hide();
						$("#dark-icon").show();
					}
				});
			});
		</script>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='scrollbar.css')}}"
    />
    <script>
      /*
      let vh = window.innerHeight * 0.01;
      console.log(vh);
      document.documentElement.style.setProperty("--vh", `${vh}px`);
      window.addEventListener("resize", () => {
        // We execute the same script as before
        let vh = window.innerHeight * 0.01;
        console.log(vh);
        document.documentElement.style.setProperty("--vh", `${vh}px`);
      });

      Chart.plugins.register({
        afterDatasetsDraw: function (chart) {
          if (chart.tooltip._active && chart.tooltip._active.length) {
            var activePoint = chart.tooltip._active[0],
              ctx = chart.ctx,
              y_axis = chart.scales["y-axis-0"],
              x = activePoint.tooltipPosition().x,
              topY = y_axis.top,
              bottomY = y_axis.bottom;
            // draw line
            ctx.save();
            ctx.beginPath();
            ctx.moveTo(x, topY);
            ctx.lineTo(x, bottomY);
            ctx.lineWidth = 2;
            ctx.strokeStyle = "#07C";
            ctx.stroke();
            ctx.restore();
          }
        },
      });
	  */
    </script>
    <style>
      .h-screen {
        height: 100vh;
        height: calc(var(--vh, 1vh) * 100);
      }
    </style>
    {% block head %} {% endblock %}
  </head>
  <body>
    <div class="flex flex-col-reverse h-screen lg:flex-row">
      <div
        id="sidebar"
        class="flex flex-row items-center justify-center h-16 px-4 bg-white border-t border-r dark:bg-zinc-900 lg:flex-col lg:w-16 xl:w-64 lg:h-screen lg:p-4 shrink-0 lg:border-t-0 lg:px-0 dark:border-zinc-800"
      >
        <div class="items-center hidden space-x-2 lg:flex">
          <img
            src="https://media-exp1.licdn.com/dms/image/C4D03AQEgVaStUAjN1w/profile-displayphoto-shrink_200_200/0/1516623558070?e=1660176000&v=beta&t=xr19Gixqmdfg8QxzOop_9aZNgCWnnKPOcx4EFcHKfrs"
            alt="pfp"
            class="w-8 rounded-full"
          />
          <p
            class="hidden text-lg font-semibold text-gray-800 xl:flex dark:text-white"
          >
            Jackei
          </p>
          <ion-icon name="chevron-down-outline" class="hidden w-4 text-gray-500 xl:flex"></ion-icon>
        </div>
        <div
          class="flex flex-row items-center justify-center flex-1 w-full h-full xl:w-auto lg:flex-col"
        >
          <a
            href="/"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:rounded-none xl:rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 hover:text-gray-900 dark:hover:text-zinc-100"
          >
            <ion-icon name="home-outline" class="w-6 h-6 lg:mr-2"></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Home</p>
          </a>
          <a
            href="/stock-analytics"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon
              name="analytics-outline"
              class="w-6 h-6 lg:mr-2"
            ></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Analytics</p>
          </a>
          <a
            href="/stock-list"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon name="list-outline" class="w-6 h-6 lg:mr-2"></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Stock List</p>
          </a>
          <a
            href="/"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon name="newspaper-outline" class="w-6 h-6 lg:mr-2"></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Watchlist</p>
          </a>
          <a
            href="/"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon name="receipt-outline" class="w-6 h-6 lg:mr-2"></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Transactions</p>
          </a>
          <a
            href="/rules"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon name="options-outline" class="w-6 h-6 lg:mr-2"></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Rules</p>
          </a>
        </div>
        <div class="w-full xl:w-auto">
          <button
            id="theme-toggle"
            class="items-center hidden w-full h-12 px-4 text-gray-700 rounded-lg lg:flex dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon
              id="dark-icon"
              class="hidden w-6 h-6 dark:block"
              name="moon-outline"
            ></ion-icon>
            <ion-icon
              id="light-icon"
              class="block w-6 h-6 dark:hidden"
              name="sunny-outline"
            ></ion-icon>
          </button>
          <a
            href="/"
            class="flex items-center w-full h-12 px-4 text-gray-700 rounded-lg dark:text-zinc-300 lg:mt-4 lg:rounded-none xl:rounded-lg dark:hover:bg-zinc-800 dark:hover:text-zinc-100 hover:text-gray-900 hover:bg-gray-100"
          >
            <ion-icon
              name="settings-outline"
              class="w-6 h-6 lg:mr-2"
            ></ion-icon>
            <p class="hidden text-xs font-bold xl:flex">Settings</p>
          </a>
        </div>
      </div>
      {% block content %}{% endblock %}
    </div>
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
  </body>
  {% block script %}{% endblock %}
</html>
